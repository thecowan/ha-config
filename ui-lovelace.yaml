title: The Dairy

background: radial-gradient(navy, skyblue)
# Exclude entities from "Unused entities" view
excluded_entities:
  - binary_sensor.switch_bedside
  - binary_sensor.switch_bedside_right
  - binary_sensor.wall_switch_both_bathroom
  - binary_sensor.wall_switch_left_bathroom
  - binary_sensor.wall_switch_right_bathroom
  - group.all_automations
  - group.all_devices
  - group.all_lights
  - group.all_scripts
  - group.all_switches
  - group.unassigned
  - script.sonos_play_non_matching
  - script.sonos_play_matching
  - script.sonos_ungroup_and_play
  - sensor.battery_paul
  - sensor.lastfm_cowanfamily
views:
  - title: Overview
    path: overview
    cards:
      - type: horizontal-stack
        cards:
          - type: picture-entity
            image: /local/paul.jpg
            entity: person.paul
            state_filter:
              not_home: brightness(110%) saturate(0.0) blur(5px) contrast(50%)
          - type: picture-entity
            image: /local/dot.jpg
            entity: person.dorothy
            state_filter:
              not_home: brightness(110%) saturate(0.0) blur(5px) contrast(50%)
      - type: vertical-stack
        cards:
          - type: horizontal-stack
            cards:
              - type: 'custom:button-card'
                entity: binary_sensor.pet_tabitha
                show_entity_picture: true
                show_state: true
                name: Tabitha
                state_display: >-
                  [[[ if (entity.state == "on") return "Home (" +
                  (states["binary_sensor.pet_tabitha"].attributes.position.device_id ==
                  "675555" ? "Bedroom" : "Office") + ")"; else return "Away" ]]]
                styles:
                  icon:
                    - border-radius: "50%"
                state:
                  - value: "off"
                    styles:
                      icon:
                        - filter: brightness(110%) saturate(0.0) blur(3px) contrast(50%)
              - type: 'custom:button-card'
                entity: binary_sensor.pet_tamara
                show_entity_picture: true
                show_state: true
                name: Tamara
                state_display: >-
                  [[[ if (entity.state == "on") return "Home (" +
                  (states["binary_sensor.pet_tamara"].attributes.position.device_id ==
                  "675555" ? "Bedroom" : "Office") + ")"; else return "Away" ]]]
                styles:
                  icon:
                    - border-radius: "50%"
                state:
                  - value: "off"
                    styles:
                      icon:
                        - filter: brightness(110%) saturate(0.0) blur(3px) contrast(50%)
          - type: horizontal-stack
            cards:
              - type: 'custom:button-card'
                name: All<br/>Unlocked
                entity: input_select.cat_flap_state
                icon: 'mdi:lock-open'
                color: green
                styles:
                  card:
                    - font-size: 10px
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  service_data:
                    entity_id: input_select.cat_flap_state
                    option: all_unlocked
                state:
                  - value: all_unlocked
                    styles:
                      card:
                        - background-color: green
                        - color: white
                      icon:
                        - color: white
              - type: 'custom:button-card'
                name: All<br />Locked
                entity: input_select.cat_flap_state
                icon: 'mdi:lock'
                color: red
                styles:
                  card:
                    - font-size: 10px
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  service_data:
                    entity_id: input_select.cat_flap_state
                    option: all_locked
                state:
                  - value: all_locked
                    styles:
                      card:
                        - background-color: red
                        - color: white
                      icon:
                        - color: white
              - type: 'custom:button-card'
                name: Keep in<br />Bedroom
                entity: input_select.cat_flap_state
                icon: 'mdi:bed'
                color: purple
                styles:
                  card:
                    - font-size: 10px
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  service_data:
                    entity_id: input_select.cat_flap_state
                    option: keep_in_bedroom
                state:
                  - value: keep_in_bedroom
                    styles:
                      card:
                        - background-color: purple
                        - color: white
                      icon:
                        - color: white
              - type: 'custom:button-card'
                name: Keep in<br />Office
                entity: input_select.cat_flap_state
                icon: 'mdi:desk'
                color: pink
                styles:
                  card:
                    - font-size: 10px
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  service_data:
                    entity_id: input_select.cat_flap_state
                    option: keep_in_office
                state:
                  - value: keep_in_office
                    styles:
                      card:
                        - background-color: pink
                        - color: white
                      icon:
                        - color: white
              - type: 'custom:button-card'
                name: Keep<br />Inside
                entity: input_select.cat_flap_state
                icon: 'mdi:home'
                color: blue
                styles:
                  card:
                    - font-size: 10px
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  service_data:
                    entity_id: input_select.cat_flap_state
                    option: keep_inside
                state:
                  - value: keep_inside
                    styles:
                      card:
                        - background-color: blue
                        - color: white
                      icon:
                        - color: white
              - type: 'custom:button-card'
                name: Keep<br />Outside
                entity: input_select.cat_flap_state
                icon: 'mdi:white-balance-sunny'
                color: orange
                styles:
                  card:
                    - font-size: 10px
                tap_action:
                  action: call-service
                  service: input_select.select_option
                  service_data:
                    entity_id: input_select.cat_flap_state
                    option: keep_outside
                state:
                  - value: keep_outside
                    styles:
                      card:
                        - background-color: orange
                        - color: white
                      icon:
                        - color: white

      - type: 'custom:mini-graph-card'
        name: Temperatures
        points_per_hour: 10
        entities:
          - entity: sensor.living_room_temperature
            name: Living Room
            show_points: false
          - entity: sensor.lilyfield_temperature
            name: Outside
            show_points: false
        min_bound_range: 5
        show:
          labels: true
      - type: weather-forecast
        entity: weather.lilyfield
      - type: vertical-stack
        cards:
          - type: 'custom:garbage-collection-card'
            entity: sensor.rubbish
          - type: 'custom:garbage-collection-card'
            entity: sensor.garden_waste
            hide_before: 7
          - type: 'custom:garbage-collection-card'
            entity: sensor.container_recycling
            hide_before: 7
          - type: 'custom:garbage-collection-card'
            entity: sensor.paper_recycling
            hide_before: 7
      - type: 'custom:button-card'
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        entity: lock.front_door
        show_state: true
        show_name: true

        state_display: >-
          [[[ var operator_string = "(by " + states["sensor.front_door_operator"].state + ")"; var state_string = "Unlocked"; if  (states["binary_sensor.front_door_open"].state == "on") {state_string = "Unlocked (Open)"} else if (entity.state == "locked") {state_string = "Locked"}; return "<b>" + state_string + "</b><br /><span style='font-size: 70%'>" + operator_string + "</span>"; ]]]
        triggers_update:
          - sensor.front_door_operator
          - binary_sensor.front_door_open
        state:
          - operator: template
            value: >
              [[[
                return (states["binary_sensor.front_door_open"].state == "on");
              ]]]
            icon: mdi:door-open
            color: blue
          - value: "locked"
            styles:
              icon:
                - color: red  
          - value: "unlocked"
            styles:
              icon:
                - color: green  
  - title: Living Room
    icon: mdi:sofa
    path: living
    cards:
      - type: entities
        entities:
        - type: 'custom:slider-entity-row'
          entity: light.yeelight_livingroom
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.yeelight_livingroom
          justify: center
          colors: !include colors_yeelight.yaml
        - type: 'custom:slider-entity-row'
          entity: light.gateway_light
          toggle: true
      - type: 'custom:simple-thermostat'
        entity: climate.living_room
        layout:
          mode:
            headings: false
            icons: true
            names: true
          step: row
        sensors:
          - entity: sensor.living_room_humidity
            name: Humidity
      - type: 'custom:mini-media-player'
        entity: media_player.living_room
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: 'custom:mini-graph-card'
        name: Living Room Climate
        points_per_hour: 20
        entities:
          - entity: sensor.living_room_temperature
            name: Temperature
          - entity: sensor.living_room_humidity
            name: Humidity
            y_axis: secondary
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: true
          labels_secondary: true
      - type: sensor
        entity: sensor.illumination_gateway
        graph: line

  - title: Kitchen
    icon: mdi:fridge-outline
    path: kitchen
    cards:
      - type: entities
        entities:
        - type: 'custom:slider-entity-row'
          entity: light.kitchen_downlights
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.kitchen_downlights
          justify: center
          colors: !include colors_kogan.yaml
        - type: 'custom:slider-entity-row'
          entity: light.yeelight_dining
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.yeelight_dining
          justify: center
          colors: !include colors_yeelight.yaml
        - entity: light.diffuser_light
          name: Diffuser Light
      - type: 'custom:mini-media-player'
        entity: media_player.kitchen
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: button
        entity: switch.diffuser_fan
        name: Diffuser
  - title: Bedroom
    icon: mdi:bed-empty
    path: bedroom
    cards:
      - type: entities
        entities:
        - type: 'custom:slider-entity-row'
          entity: light.yeelight_bedroom
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.yeelight_bedroom
          justify: center
          colors: !include colors_yeelight.yaml
        - type: 'custom:slider-entity-row'
          entity: light.bedside_lamps
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.bedside_lamps
          justify: center
          colors: !include colors_nitebird.yaml
      - type: 'custom:simple-thermostat'
        entity: climate.bedroom_ac
        layout:
          mode:
            names: true
            icons: true
            headings: false
          step: row
        step_size: '1'
        sensors:
          - entity: sensor.humidity_bedroom
            name: Humidity
      - type: 'custom:mini-media-player'
        entity: media_player.master_bedroom
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: media-control
        entity: media_player.master_bedroom_mini
      - type: 'custom:mini-graph-card'
        name: Bedroom Climate
        points_per_hour: 20
        entities:
          - entity: sensor.temperature_bedroom
            name: Temperature
          - entity: sensor.humidity_bedroom
            name: Humidity
            y_axis: secondary
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: true
          labels_secondary: true
  - title: Outside
    icon: mdi:pine-tree
    path: outside
    cards:
      - type: entities
        entities:
        - entity: light.outside_globes
        - type: 'custom:slider-entity-row'
          entity: light.flux_party
          toggle: true
          name: Party Lights
        - type: 'custom:rgb-light-card'
          entity: light.flux_party
          justify: center
          colors: !include flux_colors.yaml
        - type: 'custom:slider-entity-row'
          entity: light.flux_fairy
          toggle: true
          name: Hedge Fairy Lights
        - type: 'custom:rgb-light-card'
          entity: light.flux_fairy
          justify: center
          colors: !include flux_colors.yaml
      - type: 'custom:sun-card'
      - type: weather-forecast
        entity: weather.lilyfield
      - type: picture-entity
        entity: camera.sydney_weather_radar
        show_state: false
      - type: horizontal-stack
        cards:
        - type: 'custom:compass-card'
          indicator_sensors:
            - sensor: sensor.sydney_observatory_hill_wind_direction
              indicator:
                type: arrow_inward
          value_sensors:
            - sensor: sensor.sydney_observatory_hill_wind_speed_kilometre
          compass:
            north:
              show: true
        - type: glance
          entities:
            - sensor.moon
      - type: 'custom:mini-media-player'
        entity: media_player.outside
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: 'custom:simple-thermostat'
        entity: climate.beer_fridge
        header:
          icon: 'mdi:fridge'
        layout:
          step: row
        step_size: '0.5'
        sensors:
          - entity: sensor.beer_fridge_humidity
            name: Humidity
          - entity: sensor.beer_fridge_plug_power
            name: Power
      - type: 'custom:mini-graph-card'
        name: BBQ Cooking
        points_per_hour: 60
        entities:
          - entity: sensor.temperature_bbq_probe_1
            name: Lower (1)
            show_state: true
            state_adaptive_color: true
          - entity: sensor.temperature_bbq_probe_2
            name: Upper (2)
            show_state: true
            state_adaptive_color: true
          - entity: sensor.temperature_bbq_probe_3
            name: 3
            show_state: true
            state_adaptive_color: true
          - entity: sensor.temperature_bbq_probe_4
            name: 4
            show_state: true
            state_adaptive_color: true
          - entity: sensor.temperature_bbq_probe_5
            name: 5
            show_state: true
            state_adaptive_color: true
          - entity: sensor.temperature_bbq_probe_6
            name: 6
            show_state: true
            state_adaptive_color: true
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: false
          state: true
          legend: false
      - type: gauge
        entity: sensor.waqi_rozelle_sydney_east
        min: 0
        max: 300
        severity:
          green: 0
          yellow: 50
          red: 100
        name: Air Quality Rozelle
      - type: 'custom:mini-graph-card'
        name: Outside Climate
        points_per_hour: 20
        entities:
          - entity: sensor.temperature_outside
            name: Temperature
          - entity: sensor.humidity_outside
            name: Humidity
            y_axis: secondary
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: true
          labels_secondary: true

  - title: Bathroom
    icon: mdi:shower
    path: bathroom
    cards:
      - type: 'custom:mini-media-player'
        entity: media_player.bathroom
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: media-control
        entity: media_player.bathroom_display
      - type: entity-button
        entity: script.shower_paul
  - title: Guest room
    icon: mdi:bunk-bed
    path: guest
    cards:
      - type: entities
        entities:
        - type: 'custom:slider-entity-row'
          entity: light.yeelight_guestroom
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.yeelight_guestroom
          justify: center
          colors: !include colors_yeelight.yaml
        - entity: light.guest_room_right
      - type: 'custom:mini-media-player'
        entity: media_player.guest_room
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: 'custom:mini-graph-card'
        name: Guest Room Climate
        points_per_hour: 20
        entities:
          - entity: sensor.temperature_guestroom
            name: Temperature
          - entity: sensor.humidity_guestroom
            name: Humidity
            y_axis: secondary
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: true
          labels_secondary: true
  - title: Paul Office
    icon: mdi:desk
    path: office
    cards:
      - type: entities
        entities:
        - type: 'custom:slider-entity-row'
          entity: light.yeelight_office
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.yeelight_office
          justify: center
          colors: !include colors_yeelight.yaml
        - entity: light.diffuser_light_2
          name: Diffuser Light
      - type: 'custom:simple-thermostat'
        entity: climate.office_ac
        layout:
          mode:
            names: true
            icons: true
            headings: false
          step: row
        step_size: '1'
        sensors:
          - entity: sensor.humidity_office
            name: Humidity
      - type: 'custom:mini-media-player'
        entity: media_player.office
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: button
        entity: switch.diffuser_fan_2
        name: Diffuser
      - type: 'custom:mini-graph-card'
        name: Office Climate
        points_per_hour: 20
        entities:
          - entity: sensor.temperature_office
            name: Temperature
          - entity: sensor.humidity_office
            name: Humidity
            y_axis: secondary
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: true
          labels_secondary: true
      - type: gauge
        entity:
          - sensor.pixel_4_xl_battery_level
  - title: Dot Office
    icon: mdi:chair-rolling
    path: dot
    cards:
      - type: entities
        entities:
        - type: 'custom:slider-entity-row'
          entity: light.dots_office
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.dots_office
          justify: center
          colors: !include colors_kogan.yaml
        - type: 'custom:slider-entity-row'
          entity: light.dots_office_lamp
          toggle: true
        - type: 'custom:rgb-light-card'
          entity: light.dots_office_lamp
          justify: center
          colors: !include colors_kogan.yaml
      - type: 'custom:simple-thermostat'
        entity: climate.dots_office_ac
        layout:
          mode:
            names: true
            icons: true
            headings: false
          step: row
        step_size: '1'
        sensors:
          - entity: sensor.humidity_dots_office
            name: Humidity
      - type: 'custom:mini-media-player'
        entity: media_player.bathroom
        hide:
          icon: true
          power: true
        speaker_group:
          platform: sonos
          show_group_count: true
          entities: !include sonos-speakers.yaml
        artwork: cover
      - type: 'custom:mini-graph-card'
        name: Dot's Office Climate
        points_per_hour: 20
        entities:
          - entity: sensor.temperature_dots_office
            name: Temperature
          - entity: sensor.humidity_dots_office
            name: Humidity
            y_axis: secondary
        min_bound_range: 5
        min_bound_range_secondary: 2
        show:
          labels: true
          labels_secondary: true
  - title: Configuration
    icon: mdi:cog
    path: settings
    cards:
      - type: entities
        title: Individual Lights
        entities:
          - light.bedside_left
          - light.bedside_right
          - light.kitchen_downlight_far
          - light.kitchen_downlight_centre
          - light.kitchen_downlight_near
      - type: glance
        title: Automation Triggers
        entities:
          - automation.bedside_button
          - automation.bedside_button_double_click
          - automation.paul_arrive_home
          - automation.paul_leave_home
          - automation.paul_bathroom_button
      - type: glance
        title: Device Trackers
        entities:
          - device_tracker.paul_coral
          # - device_tracker.google_maps_107519494119268402848
          - device_tracker.oppof1s
          - device_tracker.galaxys7a
          - device_tracker.pixel
          - device_tracker.dotties_iphone
      - type: 'custom:browser-player'
      - type: glance
        title: Power
        icon: mdi:flash
        entities:
          - sensor.guest_room_left_plug_power
          - sensor.guest_room_right_plug_power
          - sensor.beer_fridge_plug_power
      - type: 'custom:battery-state-card'
        title: Battery State
        sort_by_level: asc
        tap_action: more-info
        filter:
          include:
            - name: entity_id
              value: '*_battery_level'
            - name: attributes.device_class
              value: battery
        bulk_rename:
          - from: Battery Level
            to: ''
          - from: ' Battery'
            to: ''
        color_gradient:
          - '#ff0000'
          - '#0000ff'
          - '#00ff00'
                    
