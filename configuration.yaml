homeassistant:
  # Name of the location where Home Assistant is running
  name: Dairy
  # Location required to calculate the time the sun rises and sets
  latitude: !secret latitude
  longitude: !secret longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: !secret elevation
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Australia/Melbourne
  # Customization file
  customize: !include customize.yaml
  auth_providers:
    - type: homeassistant
  external_url: !secret external_url
  internal_url: !secret internal_url
  currency: AUD

# Enables configuration UI
config:

logger:
  default: warning
  logs:
    custom_components.virtual_ducted_thermostat: debug

http:
  cors_allowed_origins: !secret cors_allowed_origins
  use_x_forwarded_for: true
  trusted_proxies: !secret trusted_proxies

# Discover some devices automatically
discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

# Enables support for tracking state changes over time
history:

# View all events in a logbook
logbook:

# Enables a map showing the location of tracked devices
map:

# Track the sun
sun:

backup:

wake_on_lan:

sensor:
  - platform: illuminance
    entity_id: weather.openweathermap
  - platform: alpha_vantage
    api_key: !secret alpha_vantage_api_key
    symbols:
    - symbol: GOOG
      name: Google C
    foreign_exchange:
    - name: AUD_USD
      from: AUD
      to: USD
  - platform: lastfm
    api_key: !secret lastfm_api_key
    users: !secret lastfm_users
  - platform: template
    sensors:
      target_aircon_temp:
        friendly_name: 'Target Ducted A/C Temperature'
        unit_of_measurement: '°C'
        value_template: >-
          {% set coldest_target = (states.climate | selectattr('entity_id', 'match', '.*duct.*') | selectattr('state', 'eq', 'cool') | map(attribute='attributes.temperature') | min | default(99)) -%}
          {%- set intake = states['sensor.daikin_ac_inside_temperature'].state | int -%}
          {{ max(min(coldest_target, intake) - 2.0, 9) }}
      lilyfield_temperature:
        friendly_name: 'Lilyfield Temperature'
        unit_of_measurement: '°C'
        value_template: "{{ state_attr('weather.lilyfield', 'temperature') }}"
      living_room_window_light_summary:
        friendly_name: 'Living Room Window Light'
        # https://en.wikipedia.org/wiki/Lux
        value_template: >-
          {%- if is_state("sensor.living_room_window_light_sensor", "unavailable") -%}
            unavailable
          {%- else -%}
            {%- set lux = states['sensor.living_room_window_light_sensor'].state | int -%}
            {%- if (lux > 30000) -%}
              direct_sun
            {%- elif (lux > 8000) -%}
              indirect_sun
            {%- elif (lux > 150) -%}
              overcast
            {%- elif (lux > 30) -%}
              dim
            {%- else -%}
              dark
            {%- endif -%}
          {%- endif -%}
      cat_flap_cloud_state:
        friendly_name: 'Cat Flap State'
        value_template: >-
          {% if is_state("sensor.cat_flap_dots_office", "unlocked") and is_state("sensor.cat_flap_bedroom", "unlocked") -%}
            all_unlocked
          {% elif is_state("sensor.cat_flap_dots_office", "locked_all") and is_state("sensor.cat_flap_bedroom", "locked_all") -%}
            all_locked
          {% elif is_state("sensor.cat_flap_dots_office", "locked_in") and is_state("sensor.cat_flap_bedroom", "locked_out") -%}
            keep_in_office
          {% elif is_state("sensor.cat_flap_dots_office", "locked_out") and is_state("sensor.cat_flap_bedroom", "locked_in") -%}
            keep_in_bedroom
          {% elif is_state("sensor.cat_flap_dots_office", "locked_in") and is_state("sensor.cat_flap_bedroom", "locked_in") -%}
            keep_inside
          {% elif is_state("sensor.cat_flap_dots_office", "locked_out") and is_state("sensor.cat_flap_bedroom", "locked_out") -%}
            keep_outside
          {%- else -%}
            mixed
          {%- endif %}
      tabitha_last_door:
        friendly_name: 'Tabitha Last Door'
        value_template: '{% if state_attr("binary_sensor.pet_tabitha", "status") == None -%}Unknown{%- elif state_attr("binary_sensor.pet_tabitha", "status").activity.device_id == 675555 -%}Bedroom{%- else -%}Office{%- endif %}'
      daikin_ac_active_mode:
        friendly_name: 'Daikin AC Active Mode'
        value_template: '{{ states.climate | selectattr("entity_id", "match", ".*daikin.*") | selectattr("state", "ne", "off") | map(attribute="state") | first | default("off") }}'
  - platform: untappd
    username: !secret untappd_username
    id: !secret untappd_id
    secret: !secret untappd_secret
  - platform: waqi
    token: !secret waqi_token
    locations:
      - !secret waqi_location
  - platform: seventeentrack
    username: !secret seventeentrack_email
    password: !secret seventeentrack_password
  - platform: rest
    name: listenbrainz_thecowan
    resource: https://api.listenbrainz.org/1/user/thecowan/listens?count=1
    json_attributes_path: "payload.listens[0].track_metadata"
    json_attributes:
      - "track_name"
      - "artist_name"
      - "release_name"
    value_template: '{{ value_json.payload.listens[0].listened_at|timestamp_utc }}'
  - platform: transport_nsw
    stop_id: "2040100"
    api_key: !secret tfnsw_api_key
    route: "469"
    name: "Next 469"
  - platform: transport_nsw
    stop_id: "204068"
    api_key: !secret tfnsw_api_key
    route: "470"
    name: "Next 470"
  - platform: transport_nsw
    stop_id: "2040115"
    api_key: !secret tfnsw_api_key
    route: "L1"
    destination: "Central"
    name: "Next Light Rail to Central"
  - platform: helium
    hotspots:
      - !secret helium_hotspot_id
    wallets:
      - !secret helium_wallet_id
  - platform: openhardwaremonitor
    host: red
    port: 8093

  - platform: powercalc
    create_group: "All Powercalc Lights"
    entities:
      - create_group: "Kitchen Downlights"
        entities:
        - entity_id: light.kitchen_downlight_near
          mode: linear
          linear:
            min_power: 1
            max_power: 5
          ignore_unavailable_state: true
        - entity_id: light.kitchen_downlight_far
          mode: linear
          linear:
            min_power: 1
            max_power: 5
          ignore_unavailable_state: true
        - entity_id: light.kitchen_downlight_centre
          mode: linear
          linear:
            min_power: 1
            max_power: 5
          ignore_unavailable_state: true
      - entity_id: light.yeelight_office
        mode: lut
        manufacturer: Yeelight
        model: color2
        ignore_unavailable_state: true
      - entity_id: light.yeelight_bedroom
        mode: lut
        manufacturer: Yeelight
        model: color2
        ignore_unavailable_state: true
      - entity_id: light.yeelight_livingroom
        mode: lut
        manufacturer: Yeelight
        model: color2
        ignore_unavailable_state: true
      - entity_id: light.yeelight_guestroom
        mode: lut
        manufacturer: Yeelight
        model: color2
        ignore_unavailable_state: true
      - entity_id: light.yeelight_entry
        mode: lut
        manufacturer: Yeelight
        model: color2
        ignore_unavailable_state: true
      - entity_id: light.dining_room
        mode: linear
        linear:
          min_power: 1
          max_power: 15
        ignore_unavailable_state: true
      - entity_id: light.tv_backlight
        wled:
          voltage: 5
        ignore_unavailable_state: true

binary_sensor:
  - platform: linode
    nodes: !secret linode_nodes
  - platform: workday
    country: AU
    province: NSW

# Text to speech
tts:
  - platform: google_translate
    service_name: google_say

# Cloud
cloud:

panel_iframe:

zone:
  - name: !secret zone_work_name
    latitude: !secret zone_work_latitude
    longitude: !secret zone_work_longitude
    radius: 500
    icon: mdi:office-building

device_tracker:
  - platform: google_maps
    username: !secret google_maps_username
    consider_home: 180
    max_gps_accuracy: 200


prometheus:

media_player:
  - platform: onkyo
    host: 10.2.2.29
    name: receiver
    sources:
      # video1_vcr_dvr_stb_dvr
      Video1: 'VCR'
      # video2_cbl_sat
      Video2: 'Sonos'
      # video3_game/tv_game_game1
      Video3: 'Dock'
      Video4: 'Video 4'
      # "video6_pc"
      Video6: 'PC'
      bd: 'Media Center'
      cd: 'TV'
      # video4_aux1
      Aux1: 'Aux'
      # fm unchanged
      # am unchanged
      "universal-port": 'Port'

notify:
#  - platform: pushbullet
#  api_key: !secret pushbullet_api_key
#  - name: pushover
#    platform: pushover
#    api_key: !secret pushover_api_key
#    user_key: !secret pushover_user_key
  - name: automate_assistant
    platform: llamalab_automate
    api_key: !secret llamalab_secret
    to: !secret llamalab_to
    device: !secret llamalab_device
  - platform: kodi
    name: "Kodi cow-macbookpro"
    host: 10.41.11.2
    port: 8788
    username: !secret kodi_username
    password: !secret kodi_password
  - platform: telegram
    name: telegram_paul
    chat_id: !secret telegram_paul_id


linode:
  access_token: !secret linode_access_token

mqtt:
  #broker: !secret mqtt_broker
  #username: !secret mqtt_username
  #password: !secret mqtt_password
  #certificate: /etc/ssl/certs/ca-certificates.crt
  #port: 8883
  sensor:
    - state_topic: "adsb/tilly"
      name: "Tilly Tracked Aircraft"
      value_template: '{{ value_json.aircraft }}'
      json_attributes_topic: "adsb/tilly"
      unique_id: adsb_tracked_aircraft
    - state_topic: "owntracks/paul/raven"
      name: "Battery Paul"
      unit_of_measurement: "%"
      value_template: '{{ value_json.batt }}'
      device_class: battery
    - name: "BBQ Probe 1"
      state_topic: "inkbird/aced94/probe1"
      unique_id: temperature_bbq_probe1
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Probe 2"
      state_topic: "inkbird/aced94/probe2"
      unique_id: temperature_bbq_probe2
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Probe 3"
      state_topic: "inkbird/aced94/probe3"
      unique_id: temperature_bbq_probe3
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Probe 4"
      state_topic: "inkbird/aced94/probe4"
      unique_id: temperature_bbq_probe4
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Probe 5"
      state_topic: "inkbird/aced94/probe5"
      unique_id: temperature_bbq_probe5
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Probe 6"
      state_topic: "inkbird/aced94/probe6"
      unique_id: temperature_bbq_probe6
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Probe Battery"
      state_topic: "inkbird/aced94/batteryLevel"
      unique_id: battery_bbq_probe
      unit_of_measurement: "%"
      device_class: "battery"
    - name: "BBQ Backup Probe 1"
      state_topic: "inkbird/abdd44/probe1"
      unique_id: temperature_bbq_backup_probe1
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Backup Probe 2"
      state_topic: "inkbird/abdd44/probe2"
      unique_id: temperature_bbq_backup_probe2
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Backup Probe 3"
      state_topic: "inkbird/abdd44/probe3"
      unique_id: temperature_bbq_backup_probe3
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Backup Probe 4"
      state_topic: "inkbird/abdd44/probe4"
      unique_id: temperature_bbq_backup_probe4
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Backup Probe 5"
      state_topic: "inkbird/abdd44/probe5"
      unique_id: temperature_bbq_backup_probe5
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Backup Probe 6"
      state_topic: "inkbird/abdd44/probe6"
      unique_id: temperature_bbq_backup_probe6
      unit_of_measurement: "°C"
      device_class: "temperature"
      expire_after: 300
    - name: "BBQ Backup Probe Battery"
      state_topic: "inkbird/abdd44/batteryLevel"
      unique_id: battery_bbq_backup_probe
      unit_of_measurement: "%"
      device_class: "battery"

group: !include groups.yaml

automation: !include automations.yaml

script: !include scripts.yaml

# mqtt_eventstream:
#  publish_topic: homeassistant/events/master

#mqtt_statestream:
#  base_topic: homeassistant
#  publish_timestamps: true
#  publish_attributes: true


var:
  receiver_last_state:
    friendly_name: Receiver Last State
    initial_value: off
    restore: true
    unique_id: var_receiver_last_state_1
  receiver_last_volume:
    friendly_name: Receiver Last Volume
    initial_value: 0
    restore: true
    unique_id: var_receiver_last_volume_1
  receiver_last_source:
    friendly_name: Receiver Last Source
    initial_value: none
    restore: true
    unique_id: var_receiver_last_source_1

light:
  - platform: switch
    name: Guest Room Lamp Left
    entity_id: switch.guest_room_left_plug
  - platform: switch
    name: Guest Room Lamp Right
    entity_id: switch.guest_room_right_plug
  - platform: group
    name: Guest Room Lamps
    entities:
      - light.guest_room_lamp_left
      - light.guest_room_lamp_right
  - platform: group
    name: Bedside Lamps
    entities:
      - light.bedside_left
      - light.bedside_right
  - platform: group
    name: Kitchen Downlights
    entities:
      - light.kitchen_downlight_near
      - light.kitchen_downlight_far
      - light.kitchen_downlight_centre
  - platform: template
    lights:
      office_ring_light_template:
        friendly_name: "Office Ring Test"
        unique_id: template_light_office_ring_light
        value_template: >-
          {% if is_state('light.office_ring_light_white', 'on') %}
            on
          {% elif is_state('light.office_ring_light_colour', 'on') %}
            on
          {% else %}
            off
          {% endif %}
        turn_on:
          service: light.turn_on
          target:
            entity_id: >-
              {% if is_state('input_text.office_ring_light_last_mode', '') %}
                light.office_ring_light_white
              {% elif is_state('input_text.office_ring_light_last_mode', 'unknown') %}
                light.office_ring_light_white
              {% else %}
                {{ states['input_text.office_ring_light_last_mode'].state }}
              {% endif %}
        turn_off:
          - service: light.turn_off
            target:
              entity_id: light.office_ring_light_white
          - service: light.turn_off
            target:
              entity_id: light.office_ring_light_colour
        availability_template: >-
          {% if is_state('light.office_ring_light_white', 'unavailable') %}
            false
          {% elif is_state('light.office_ring_light_colour', 'unavailable') %}
            false
          {% else %}
            true
          {% endif %}
        level_template: >-
          {{ state_attr('light.office_ring_light_master', 'brightness') }}
        effect_template: "{{ state_attr('light.office_ring_light_colour', 'effect') }}"
        effect_list_template: "{{ state_attr('light.office_ring_light_colour', 'effect_list') }}"
        #temperature_template: "{{states('input_number.temperature_input') | int}}"
        color_template: >-
          {% if is_state('light.office_ring_light_colour', 'on') %}
            {{ state_attr('light.office_ring_light_colour', 'hs_color') }}
          {% endif %}
        #white_value_template
        #set_white_value:
        #supports_transition_template
        min_mireds_template: "100"
        max_mireds_template: "500"
        #icon_template
        set_level:
          service: light.turn_on
          target:
            entity_id: >-
              light.office_ring_light_master
          data:
            brightness: "{{ brightness }}"
        set_temperature:
          - service: light.turn_off
            target:
              entity_id: light.office_ring_light_colour
            data:
              transition: 0
          - service: light.turn_on
            target:
              entity_id: light.office_ring_light_white
            data:
              rgbw_color:
              - >-
                {% set kelvin = 1000000 / color_temp %}
                {% if kelvin > 8050 %}
                 {% set r_comp = 225 - ((kelvin - 8080) / 86) %}
                {% elif kelvin >= 6600 %}
                 {% set r_comp = 254 - ((kelvin - 6600) / 50) %}
                {% else %}
                 {% set r_comp = 255 %}
                {% endif %}
                {{ r_comp }}
              - 255
              - >-
                {% set kelvin = 1000000 / color_temp %}
                {% if kelvin >= 6600 %}
                 {% set b_comp = 255 %}
                {% else %}
                 {% if kelvin > 5700 %}
                  {% set x = 5700 %}
                  {% set y = 230 %}
                  {% set z = 34 %}
                 {% elif kelvin > 5100 %}
                  {% set x = 5100 %}
                  {% set y = 210 %}
                  {% set z = 30 %}
                 {% elif kelvin > 4500 %}
                  {% set x = 4500 %}
                  {% set y = 186 %}
                  {% set z = 25 %}
                 {% elif kelvin > 3906 %}
                  {% set x = 3906 %}
                  {% set y = 159 %}
                  {% set z = 22 %}
                 {% elif kelvin > 3398 %}
                  {% set x = 3398 %}
                  {% set y = 132 %}
                  {% set z = 19 %}
                 {% elif kelvin > 2900 %}
                  {% set x = 2900 %}
                  {% set y = 101 %}
                  {% set z = 16 %}
                 {% elif kelvin > 2492 %}
                  {% set x = 2492 %}
                  {% set y = 72 %}
                  {% set z = 14 %}
                 {% elif kelvin > 2100 %}
                  {% set x = 2100 %}
                  {% set y = 33 %}
                  {% set z = 10 %}
                 {% else %}
                  {% set x = 1900 %}
                  {% set y = 0 %}
                  {% set z = 6 %}
                 {% endif %}
                 {% set b_comp = ((kelvin - x) / z) + y %}
                {% endif %}
                {{ b_comp }}
              - 255
        set_color:
          - service: light.turn_off
            target:
              entity_id: light.office_ring_light_white
            data:
              transition: 0
          - service: light.turn_on
            target:
              entity_id: light.office_ring_light_colour
            data:
              effect: "solid"
              hs_color:
                - "{{ hs[0] }}"
                - "{{ hs[1] }}"
        set_effect:
          - service: light.turn_off
            target:
              entity_id: light.office_ring_light_white
            data:
              transition: 0
          - service: light.turn_on
            target:
              entity_id: light.office_ring_light_colour
            data:
              effect: "{{ effect }}"


google_assistant:
  project_id: !secret google_assistant_project_id
  service_account: !include dairy-homeassistant-5e3328b5a268.json
  report_state: true
  secure_devices_pin: !secret google_assistant_secure_devices_pin
  exposed_domains:
    - script
    - climate
    - fan
    - cover
  entity_config:
    light.yeelight_entry:
      expose: true
      room: Entry

    light.yeelight_bedroom:
      expose: true
      room: Bedroom
    light.bedside_lamps:
      expose: true
      room: Bedroom

    light.dots_office_lamp:
      expose: true
      room: Dot's Office
    light.dots_office:
      expose: true
      room: Dot's Office

    light.gateway_light:
      expose: false
      room: Living Room
    light.yeelight_livingroom:
      expose: true
      room: Living Room

    light.yeelight_guestroom:
      expose: true
      room: Guest Room
    light.guest_room_lamps:
      expose: false
      room: Guest Room

    light.yeelight_dining:
      expose: true
      room: Dining Room

    light.kitchen_downlights:
      expose: true
      room: Kitchen

    light.yeelight_office:
      expose: true
      room: Office
    fan.office_diffuser:
      expose: true
      room: Office

    light.outside_globes:
      expose: true
      room: Outside


lovelace:
  mode: yaml
  resources:
    - url: "/hacsfiles/bom-weather-card/bom-weather-card.js"
      type: module
    - url: "/hacsfiles/ha-card-weather-conditions/ha-card-weather-conditions.js"
      type: module
    - url: "/hacsfiles/simple-weather-card/simple-weather-card-bundle.js"
      type: module
    - url: "/hacsfiles/platinum-weather-card/platinum-weather-card.js"
      type: module
    - url: "/hacsfiles/clock-weather-card/clock-weather-card.js"
      type: module
    - url: "/hacsfiles/kiosk-mode/kiosk-mode.js"
      type: module
    - url: "/local/climate-fan-button-row/climate-fan-button-row.js"
      type: module
    - url: "https://cdn.jsdelivr.net/npm/rgb-light-card"
      type: module
    - url: '/hacsfiles/home-assistant-sun-card/home-assistant-sun-card.js'
      type: module
    - url: '/hacsfiles/battery-state-card/battery-state-card.js'
      type: module
    - url: '/hacsfiles/button-card/button-card.js'
      type: module
    - url: '/hacsfiles/mini-graph-card/mini-graph-card-bundle.js'
      type: module
    - url: '/hacsfiles/tv-card/tv-card.js'
      type: module
    - url: '/hacsfiles/mini-media-player/mini-media-player-bundle.js'
      type: module
    - url: '/hacsfiles/simple-thermostat/simple-thermostat.js'
      type: module
    - url: '/hacsfiles/lovelace-thermostat-card/main.js'
      type: module
    - url: '/hacsfiles/lovelace-thermostat-dark-card/thermostat-dark-card.js'
      type: module
    - url: '/hacsfiles/lovelace-slider-entity-row/slider-entity-row.js'
      type: module
    - url: '/hacsfiles/compass-card/compass-card.js'
      type: module
    - url: '/hacsfiles/garbage-collection-card/garbage-collection-card.js'
      type: module
    - url: '/hacsfiles/fan-control-entity-row/fan-control-entity-row.js'
      type: module
    - url: '/hacsfiles/fan-mode-button-row/fan-mode-button-row.js'
      type: module
    - url: '/hacsfiles/config-template-card/config-template-card.js'
      type: module
    - url: '/hacsfiles/decluttering-card/decluttering-card.js'
      type: module
    - url: '/hacsfiles/canvas-gauge-card/canvas-gauge-card.js'
      type: module
    - url: '/hacsfiles/PlantPictureCard/PlantPictureCard.js'
      type: module
    - url: '/hacsfiles/miflora-card/miflora-card.js'
      type: module
    - url: '/hacsfiles/uptime-card/uptime-card.js'
      type: module
    - url: '/hacsfiles/apexcharts-card/apexcharts-card.js'
      type: module
    - url: '/hacsfiles/lovelace-auto-entities/auto-entities.js'
      type: module
    - url: '/hacsfiles/bom-radar-card/bom-radar-card.js'
      type: module
    - url: '/hacsfiles/lovelace-fold-entity-row/fold-entity-row.js'
      type: module
    - url: '/hacsfiles/fr24_card/fr24_card.js'
      type: module
    - url: '/hacsfiles/ha-sankey-chart/ha-sankey-chart.js'
      type: module
    - url: '/hacsfiles/thermal_comfort_icons/thermal_comfort_icons.js'
      type: module
    - url: '/hacsfiles/frigate-hass-card/frigate-hass-card.js'
      type: module
    - url: '/hacsfiles/custom-brand-icons/custom-brand-icons.js'
      type: js
    - url: '/hacsfiles/mini-climate-card/mini-climate-card-bundle.js'
      type: module
  dashboards:
    lovelace-reporting:
      mode: yaml
      title: Reporting
      filename: ui-reporting.yaml
      show_in_sidebar: true
      require_admin: true
      icon: mdi:chart-areaspline
    lovelace-auto:
      mode: yaml
      title: Auto
      filename: ui-nonexistent.yaml
      show_in_sidebar: true
      require_admin: true
      icon: mdi:robot-industrial

input_boolean:
  guest_mode:
    name: Guest Mode
    icon: mdi:account-multiple-plus

input_text:

input_number:

counter:

timer:

climate:
  - platform: generic_thermostat
    name: Beer Fridge
    heater: switch.beer_fridge_plug
    target_sensor: sensor.beer_fridge_temperature
    unique_id: beer_fridge_thermostat_lumi_plug
    min_temp: 5
    max_temp: 20
    ac_mode: true
    min_cycle_duration:
      seconds: 300
    keep_alive: "00:05:00"
  # Example of a single generic heater thermo
  #- platform: generic_thermostat
  #  name: Living Room
  #  heater: switch.livingroom_heater
  #  target_sensor: sensor.living_room_temperature
  #  unique_id: livingroom_heater_thermostat_zsp001b
  #  min_temp: 10
  #  max_temp: 30
  #  min_cycle_duration:
  #    seconds: 300
  #  keep_alive: "00:05:00"
  #  cold_tolerance: 0.5
  # Old manual daikin setup
  #- platform: generic_thermostat
  #  name: "Living Room Ducted Cooling"
  #  heater: switch.daikin_ac_living
  #  ac_mode: true
  #  target_sensor: sensor.living_room_temperature
  #  unique_id: generic_thermostat_daikin_ducted_living_room_cooling
  #  min_temp: 7
  #  max_temp: 35
  #  min_cycle_duration:
  #    seconds: 300
  #  #keep_alive: "00:05:00"
  #  cold_tolerance: 0.4
  #  hot_tolerance: 0.4
  #  precision: 1.0
  # Old SmartIR
  #- platform: smartir
  #  name: "Living Room AC"
  #  unique_id: living_room_ac
  #  device_code: 1101
  #  controller_data: remote.guest_room_remote
  #  temperature_sensor: sensor.living_room_temperature
  #  humidity_sensor: sensor.humidity_livingroom
  #
  #  Old climate_template
  #- platform: climate_template
  #  name: Paul Office
  #  unique_id: climate_template_daikin_ducted_paul_office
  #  modes:
  #    - "fan_only"
  #    - "dry"
  #    - "cool"
  #    - "heat"
  #    - "off"
  #    # - "heat_cool"
  #  fan_modes:
  #    - "Auto"
  #    - "Low"
  #    - "Mid"
  #    - "High"
  #    #- "Low/Auto"
  #    #- "Mid/Auto"
  #    #- "High/Auto"
  #  min_temp: 7
  #  max_temp: 35
  #  current_temperature_template: "{{ states('sensor.office_temperature') }}"
  #  current_humidity_template: "{{ states('sensor.office_humidity') }}"
  #  fan_mode_template: '{{ state_attr("climate.daikin_ac", "fan_mode") }}'
  #  hvac_mode_template: '{% if is_state("switch.daikin_ac_paul_office", "off") -%}off{%- else -%}{{ state_attr("climate.daikin_ac", "hvac_action") }}{%- endif %}'
  #  availability_template: '{{ not (is_state("switch.daikin_ac_paul_office", "unavailable") or is_state("climate.daikin_ac", "unavailable")) }}'
  #  target_temperature_template: "{{states('input_number.paul_office_virtual_ac_target_temp')}}"
  #  precision: 1.0

  #  # example action
  #  #set_hvac_mode:
  #  #  - service: esphome.bedroom_node_aircon_state
  #  #    data:
  #  #      temperature: "{{ state_attr('climate.bedroom_aircon', 'temperature') | int }}"
  #  #      operation_mode: "{{ states('climate.bedroom_aircon') }}"
  #  #      fan_mode: "{{ state_attr('climate.bedroom_aircon', 'fan_mode') }}"
  #  #      swing_mode: "{{ is_state_attr('climate.bedroom_aircon', 'swing_mode', 'on') }}"
  #  #      light: "{{ is_state('light.bedroom_aircon_light', 'on') }}"

  - platform: virtual_ducted_thermostat
    name: Daikin Virtual
    central_climate: climate.daikin_ac
    tolerance: 0.5
    auto_mode: all
    min_cycle_duration:
      seconds: 60
    zone:
      - name: "Daikin Paul Office"
        vent_switch: switch.daikin_ac_paul_office
        temp_sensor: sensor.office_temperature
        humidity_sensor: sensor.office_humidity
        unique_id: vdt_daikin_ac_paul_office
      - name: "Daikin Dot Office"
        vent_switch: switch.daikin_ac_dot_office
        temp_sensor: sensor.dots_office_temperature
        humidity_sensor: sensor.dots_office_humidity
        unique_id: vdt_daikin_ac_dot_office
      - name: "Daikin Bedroom"
        vent_switch: switch.daikin_ac_bedroom
        temp_sensor: sensor.bedroom_temperature
        humidity_sensor: sensor.bedroom_humidity
        unique_id: vdt_daikin_ac_bedroom
      - name: "Daikin Guest Room"
        vent_switch: switch.daikin_ac_guest
        temp_sensor: sensor.guest_room_temperature
        humidity_sensor: sensor.guest_room_humidity
        unique_id: vdt_daikin_ac_guest_room
      - name: "Daikin Kitchen"
        vent_switch: switch.daikin_ac_kitchen
        temp_sensor: sensor.beer_fridge_temperature
        humidity_sensor: sensor.beer_fridge_humidity
        unique_id: vdt_daikin_ac_kitchen
      - name: "Daikin Living Room"
        vent_switch: switch.daikin_ac_living
        temp_sensor: sensor.living_room_temperature
        humidity_sensor: sensor.living_room_humidity
        unique_id: vdt_daikin_ac_living

system_health:

person:
  - name: Paul
    id: paul1
    user_id: d7f6e7ea9e2447229fdda4f8f7119869
    device_trackers:
      - device_tracker.pauls_pixel_6_pro
  - name: Dorothy
    id: dorothy1
    user_id: ea472a5137eb4da3a0d72aad0dcf1f50
    device_trackers:
      - device_tracker.iphone

ssdp:

zeroconf:

owntracks:
  max_gps_accuracy: 300
  waypoints: True
  waypoint_whitelist:
    - paul

#zoneminder:
#  - host: !secret zoneminder_host
#    username: !secret zoneminder_username
#    password: !secret zoneminder_password

camera:
#  - platform: zoneminder
  - platform: local_file
    name: "Sydney Weather Radar"
    file_path: /config/bomgrabber/IDR714.composite.gif

mobile_app:

proximity:
  home_paul:
    devices:
      device_tracker.pauls_pixel_6_pro
    tolerance: 30
  home_dot:
    devices:
      device_tracker.iphone
    tolerance: 30

smartir:

#browser_mod:
#  prefix: "browser_"
#  devices:
#    f3e90f74-0a97b878:
#      name: cow-macbookpro2
#    d7a5ab3d_98918e52:
#      name: wallpanel-office

input_select:
  cat_flap_state:
    name: 'Cat Flap Control'
    options:
      - 'all_unlocked'
      - 'all_locked'
      - 'keep_in_office'
      - 'keep_in_bedroom'
      - 'keep_inside'
      - 'keep_outside'
      - 'unknown'
      - 'mixed'
    initial: 'unknown'
    icon: mdi:cat
  curfew_type:
    name: 'Curfew Action'
    options:
      - 'keep_in_office'
      - 'keep_in_bedroom'
      - 'No Curfew'
    icon: mdi:cat
  curfew_end_state:
    name: 'Curfew End'
    options:
      - 'restore'
      - 'keep_in_bedroom'
      - 'keep_in_office'
      - 'all_unlocked'
      - 'maintain_curfew'
    icon: mdi:cat

input_datetime:
  curfew_start:
    name: 'Curfew Start'
    has_date: false
    has_time: true
  curfew_end:
    name: 'Curfew End'
    has_date: false
    has_time: true

frontend:
  themes: !include_dir_merge_named themes

telegram_bot:
  - platform: webhooks
    api_key: !secret telegram_bot_api_key
    allowed_chat_ids:
      - !secret telegram_paul_id

lock:
  - platform: template
    name: Back Gate
    unique_id: lock_template_back_gate
    value_template: "{{ is_state('switch.gate_lock', 'off') }}"
    lock:
      service: switch.turn_off
      target:
        entity_id: switch.gate_lock
    unlock:
      service: switch.turn_on
      target:
        entity_id: switch.gate_lock

plant:
  rosemary:
    sensors:
      moisture: sensor.rosemary_soil_moisture
      battery: sensor.rosemary_battery
      temperature: sensor.rosemary_temperature
      conductivity: sensor.rosemary_soil_conductivity
      brightness: sensor.rosemary_lux
    min_moisture: 20
  bamboo_lawn:
    sensors:
      moisture: sensor.bamboo_lawn_soil_moisture
      battery: sensor.bamboo_lawn_battery
      temperature: sensor.bamboo_lawn_temperature
      conductivity: sensor.bamboo_lawn_soil_conductivity
      brightness: sensor.bamboo_lawn_lux
    min_moisture: 40
  bamboo_kitchen_window:
    sensors:
      moisture: sensor.bamboo_kitchen_window_soil_moisture
      battery: sensor.bamboo_kitchen_window_battery
      temperature: sensor.bamboo_kitchen_window_temperature
      conductivity: sensor.bamboo_kitchen_window_soil_conductivity
      brightness: sensor.bamboo_kitchen_window_lux
    min_moisture: 40
  hosta_gold_standard:
    sensors:
      moisture: sensor.hosta_gold_standard_soil_moisture
      battery: sensor.hosta_gold_standard_battery
      temperature: sensor.hosta_gold_standard_temperature
      conductivity: sensor.hosta_gold_standard_soil_conductivity
      brightness: sensor.hosta_gold_standard_lux
    min_moisture: 40
  lavender:
    sensors:
      moisture: sensor.lavender_soil_moisture
      battery: sensor.lavender_battery
      temperature: sensor.lavender_temperature
      conductivity: sensor.lavender_soil_conductivity
      brightness: sensor.lavender_lux
    min_moisture: 20
  jasmine:
    sensors:
      moisture: sensor.jasmine_soil_moisture
      battery: sensor.jasmine_battery
      temperature: sensor.jasmine_temperature
      conductivity: sensor.jasmine_soil_conductivity
      brightness: sensor.jasmine_lux
    min_moisture: 20

calendar:
  - platform: entities_calendar
    calendars:
      name: Entity Calendar
      entities:
        - entity: sensor.cert_expiry_timestamp_prometheus_cowlan_net
        - entity: sensor.cert_expiry_timestamp_wildcard_cowlan_net

template:
  - unique_id: adsb
    sensor:
    - name: 'Closest Plane'
      unique_id: closest_plane
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).r | default('None') | trim }}
      picture: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).image  }}
      attributes:
        latitude: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).lat  }}
        longitude: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).lon  }}
        last_message: >-
          {{ ((state_attr('sensor.tilly_tracked_aircraft', 'timestamp') - (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).seen) | timestamp_utc | as_datetime).isoformat() + "+00:00" }}
        last_position: >-
          {{ ((state_attr('sensor.tilly_tracked_aircraft', 'timestamp') - (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).seen_pos) | timestamp_utc | as_datetime).isoformat() + "+00:00" }}
        operator: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).operator  }}
        owner: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).owner  }}
        route: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).route  }}
      availability: >
        {{ state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')|length > 0  }} 

    - name: 'Closest Plane Flight Number'
      unique_id: closest_plane_flight_number
      state: >
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).flight | trim }}
      availability: >
        {{ state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')|length > 0  }} 
    - name: 'Closest Plane Type'
      unique_id: closest_plane_type
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).desc | trim }}
      attributes:
        code: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).t  }}
        category_code: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).category  }}
        category: >-
          {% set mappings = {
            'A': {'name': 'Aircraft', '1': 'Light (<15,500 lbs.)', '2': 'Small (15,500 to 75,000 lbs.)', '3': 'Large (75,000 to 300,000 lbs.)', 4: 'High-Vortex Large', '5': 'Heavy (> 300,000 lbs.)', '6': 'High Performance', '7': 'Rotorcraft'},
            'B': {'name': 'Unpowered', '1': 'Glider / Sailplane', '2': 'Lighter-than-Air', '3': 'Parachutist / Skydiver', '4': 'Ultralight / hang-glider / paraglider', '6': 'Unmanned Aerial Vehicle', '7': 'Space / Trans-atmospheric vehicle'},
            'C': {'name': 'Ground'},
            'D': {'name': 'Other'},
            'X': {'name': 'Unknown'}}
          %}
          {% set category = (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).category | default('XX') %}
          {{ mappings[category | first]['name'] }} - {{ mappings[category | first][category | last] | default('unknown')}}
      availability: >
        {{ state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')|length > 0  }} 
    - name: 'Closest Plane Distance'
      unique_id: closest_plane_distance
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).distance_km | round(3) }}
      unit_of_measurement: 'km'
      icon: fas:ruler-horizontal
    - name: 'Closest Plane Bearing'
      unique_id: closest_plane_bearing
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).bearing | round(1) }}
      attributes:
        direction: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {% set directions = ['N', 'NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'] %}
          {{ directions[(((nearest.bearing + 11.25) % 360) / 22.5) | int] }}
        direction_fine: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {% set directions_fine = ['N','NbE','NNE','NEbN','NE','NEbE','ENE','EbN','E','EbS','ESE','SEbE','SE','SEbS','SSE','SbE','S','SbW','SSW','SWbS','SW','SWbW','WSW','WbS','W','WbN','WNW','NWbW','NW','NWbN','NNW','NbW'] %}
          {{ directions_fine[(((nearest.bearing + 5.625) % 360) / 11.25) | int] }}
        direction_crude: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {% set directions_crude = ['N','NE', 'E', 'SE','S','SW','W','NW'] %}
          {{ directions_crude[(((nearest.bearing + 22.5) % 360) / 45) | int] }}
      unit_of_measurement: '°'
      icon: mdi:compass-rose
    - name: 'Closest Plane Heading'
      unique_id: closest_plane_heading
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).track }}
      attributes:
        rate: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).track_rate | default(0) }}
        direction: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {% set directions = ['N', 'NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'] %}
          {{ directions[(((nearest.track + 11.25) % 360) / 22.5) | int] }}
        direction_fine: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {% set directions_fine = ['N','NbE','NNE','NEbN','NE','NEbE','ENE','EbN','E','EbS','ESE','SEbE','SE','SEbS','SSE','SbE','S','SbW','SSW','SWbS','SW','SWbW','WSW','WbS','W','WbN','WNW','NWbW','NW','NWbN','NNW','NbW'] %}
          {{ directions_fine[(((nearest.track + 5.625) % 360) / 11.25) | int] }}
        direction_crude: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {% set directions_crude = ['N','NE', 'E', 'SE','S','SW','W','NW'] %}
          {{ directions_crude[(((nearest.track + 22.5) % 360) / 45) | int] }}
      unit_of_measurement: '°'
      icon: mdi:compass
      availability: >
        {{ state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')|length > 0  }}
    - name: 'Closest Plane Ground Speed'
      unique_id: closest_plane_ground_speed
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).gs | round(1) }}
      unit_of_measurement: 'kts'
      icon: mdi:speedometer
    - name: 'Closest Plane Altitude (Barometric)'
      unique_id: closest_plane_altitude
      state: >-
        {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).alt_baro | round(1) }}
      attributes:
        rate: >-
          {{ (state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).baro_rate | default((state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({})).geom_rate) | round(1) }}
      unit_of_measurement: 'ft'
      icon: fas:ruler-vertical
    - name: 'Closest Plane Approach'
      unique_id: closest_plane_approach
      state: >-
        {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
        {% if 90 < ((nearest.bearing - nearest.track) | int % 360) < 270 %}approaching{% else %}receding{%endif%}
      icon: fas:map-signs
      availability: >
        {{ state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')|length > 0  }} 
    - name: 'Closest Plane CPA'
      unique_id: closest_plane_cpa
      state: >-
        {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
        {% if nearest.cpa_km is defined %}
          {{ nearest.cpa_km | round(3) }}
        {% endif %}
      icon: mdi:map-marker-radius
      unit_of_measurement: 'km'
      attributes:
        altitude_est: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {{ nearest.cpa_altitude_estimate | round(0) }}
        time_est: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {{ nearest.cpa_secs | round(1) }}
        latitude: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {{ nearest.cpa_lat }}
        longitude: >-
          {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] %}
          {{ nearest.cpa_lon }}
      availability: >
        {% set nearest = state_attr('sensor.tilly_tracked_aircraft', 'nearest_aircraft')[0] | default({}) %}
        {% if nearest.cpa_km is defined %}
          true
        {% endif %}
    # TODO: 
    # track trend - turning towards or away?
    # operator (needs API)
    # Noise (estimated)
    # Noise (current)
  - unique_id: office
    sensor:
    - name: 'Busy Light Colour'
      unique_id: busy_light_colour
      state: >-
        {% if not is_state('binary_sensor.cow_macbookpro_in_meeting', 'on') %}
          free
        {% elif is_state('binary_sensor.cow_macbookpro_muted', 'off') %}
          red
        {% elif is_state('binary_sensor.cow_macbook_pro_camera_in_use', 'on') %}
          blue
        {% else %}
          green
        {% endif %}
  - unique_id: hnt_wallet_master
    sensor:
    - name: 'Helium Master Wallet Value'
      unique_id: hnt_wallet_master_value_usd
      state: "{{ (states('sensor.helium_hnt_oracle_price') |float(0) * states('sensor.helium_wallet_master') | float(0)) | round(2) }}"
      unit_of_measurement: "USD"
      icon: "mdi:wallet"
  - binary_sensor:
    - name: 'cow-macbookpro Docked In Office'
      state: >- 
        {{ states("sensor.cow_macbookpro_primary_display_name") == "B326Hk" }}
      # {{ state_attr('sensor.cows_macbook_pro_displays', 'Display IDs') | select('eq', '1552D80D-A68A-5100-D7A7-18F5F54AE116') | list | count > 0 }}
      delay_on: '0:00:10'
      delay_off: '0:00:10'
      device_class: 'connectivity'
    - name: 'Office Sonos Ungrouped'
      state: >- 
        {{ state_attr('sensor.cows_macbook_pro_displays', 'Display IDs') | select('eq', '1552D80D-A68A-5100-D7A7-18F5F54AE116') | list | count > 0 }}
      delay_on: '0:00:10'
      delay_off: '0:00:10'
      device_class: 'connectivity'
  - sensor:
    - name: 'Heating Power'
      unique_id: category_heating_summed_power
      state: >-
        {{ states("sensor.dots_office_heater_power") | float(0.0)
        + states("sensor.office_heater_power") | float(0.0)
        + states("sensor.bedroom_heater_power") | float(0.0)
        + states("sensor.guest_room_heater_power") | float(0.0)
        + states("sensor.living_room_heater_power") | float(0.0)
        }}
      unit_of_measurement: "W"
      icon: "mdi:home-lightning-bolt"
      device_class: 'power'
    - name: 'Appliance Power'
      unique_id: category_appliance_summed_power
      state: >-
        {{ states("sensor.washing_machine_power") | float(0.0)
        + states("sensor.dishwasher_power") | float(0.0)
        }}
      unit_of_measurement: "W"
      icon: "mdi:home-lightning-bolt"
      device_class: 'power'
    - name: 'Whole House Known Power'
      unique_id: whole_house_known_guesstimated_power
      state: >-
        {{ states("sensor.all_powercalc_lights_power") | float(0.0)
        + states("sensor.appliance_power") | float(0.0)
        + states("sensor.heating_power") | float(0.0)
        }}
      unit_of_measurement: "W"
      icon: "mdi:home-lightning-bolt"
      device_class: 'power'

rest_command:
  toggle_cow_macbookpro_mutesync:
    url: !secret mutesync_token_cowmacbookpro
    method: post
    headers:
      Authorization: !secret mutesync_token_cowmacbookpro

switch:
  - platform: template
    switches:
      cow_macbookpro_mutesync_mute:
        friendly_name: "cow-macbookpro mutesync muted"
        unique_id: "switch_template_cow_macbookpro_mutesync_muted"
        value_template: '{{ is_state("binary_sensor.cow_macbookpro_muted", "on")}}'
        availability_template: '{{ is_state("binary_sensor.cow_macbookpro_in_meeting", "on")}}'
        turn_on:
          service: rest_command.toggle_cow_macbookpro_mutesync
        turn_off:
          service: rest_command.toggle_cow_macbookpro_mutesync
  - platform: wake_on_lan
    name: red
    host: !secret red_ip_address
    mac: !secret red_mac_address

shell_command:
  process_mpd_data: '/config/ha-scrobble/processmpd.sh {{ mpd_data }}'

cow_custom_filters:

my:

rest:
  - resource: http://10.41.2.69/info/system
    scan_interval: 60
    headers:
      Cookie: mysession=MTY3NTA1ODkyOXxEdi1CQkFFQ180SUFBUkFCRUFBQVlfLUNBQUVHYzNSeWFXNW5EQTBBQzJOMWNuSmxiblJWYzJWeUNXMWhhVzR1VlhObGN2LURBd0VCQkZWelpYSUJfNFFBQVFRQkFrbGtBUVFBQVFoVmMyVnlibUZ0WlFFTUFBRUlVR0Z6YzNkdmNtUUJEQUFCQjBacGNuTjBTVzRCQWdBQUFCel9oQmtCX2s0aUFRVmhaRzFwYmdFTFRXOXZRMjkzWFRBeFd5RUF8cyTTTy8Ic4kD3pDziG4mPqXPvmChtmfwOLRNS8sfy1g=
    sensor:
      - name: "Linxdot CPU Temperature"
        value_template: "{{ value_json.cpu_temp | round(1) }}"
        unit_of_measurement: '°C'
        device_class: "temperature"
        state_class: "measurement"
      - name: "Linxdot CPU Load"
        value_template: "{{ value_json.cpu_usage | round(1) }}"
        state_class: "measurement"
        unit_of_measurement: '%'
  - resource: http://gobo:8082/data/aircraft.json
    scan_interval: 15
    sensor:
      - name: "FR24 Aircraft"
        value_template: "{{ value_json.messages }}"
        json_attributes:
        - now
        - aircraft


utility_meter:
  helium_wallet_today:
    source: sensor.helium_wallet_master
    cycle: daily

  helium_wallet_weekly:
    source: sensor.helium_wallet_master
    cycle: weekly

  helium_wallet_monthly:
    source: sensor.helium_wallet_master
    cycle: monthly

energy:


powercalc:


recorder:
  commit_interval: 10
  exclude:
    entity_globs:
      - sensor.closest_plane*
    entities:
      - sensor.tilly_tracked_aircraft

bluetooth:
